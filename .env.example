# ============================================
# Traffic Monitoring System - Environment Configuration
# ============================================
# 
# QUICK START:
# 1. Copy this file: cp .env.example .env
# 2. Edit values if needed (defaults work for most cases)
# 3. Run: docker-compose up --build
#
# ============================================

# ===== SERVICE PORTS =====
# Ports exposed on your host machine
AI_SERVICE_PORT=8000
BACKEND_PORT=8080
FRONTEND_PORT=5173

# ===== FRONTEND CONFIGURATION =====
# URL that frontend uses to reach backend
# VITE_API_BASE=http://traffic-ktor-backend:8080

# Enable v2 features
VITE_ENABLE_V2=true

# Enable authentication
VITE_ENABLE_AUTH=true

# ===== BACKEND CONFIGURATION =====
# URL that backend uses to reach AI service
# KTOR_AI_ENDPOINT=http://traffic-ai-service:8000/api/process-video

# Enable database persistence (v2 features)
ENABLE_V2_PERSISTENCE=true

# Enable authentication
ENABLE_AUTHENTICATION=true

# Require auth for video uploads
REQUIRE_AUTH_FOR_UPLOAD=false

# Database Configuration
DB_HOST=traffic-postgres
DB_PORT=5432
DB_NAME=traffic_monitoring
DB_USER=postgres
DB_PASSWORD=postgres

# JWT Configuration
JWT_SECRET=your-secret-key-change-in-production
JWT_ISSUER=traffic-monitoring-system
JWT_AUDIENCE=traffic-monitoring-api
JWT_REALM=Access to Traffic Monitoring API
JWT_VALIDITY_MS=3600000 # 1 hour

# Feature Flags
ENABLE_V2_PERSISTENCE=false
ENABLE_AUTHENTICATION=false

# ===== AI CONFIGURATION =====
# Speed detection
PIXEL_TO_METER=0.05
SPEED_LIMIT=50.0

# Processing
FRAME_SKIP=1
MIN_TRACKED_FRAMES=8

# Confidence thresholds (0.0 to 1.0)
VEHICLE_CONFIDENCE=0.35
PLATE_CONFIDENCE=0.25
OCR_CONFIDENCE=0.5

# Tracking
MAX_DISAPPEARED=60
MAX_DISTANCE=70.0

# OCR enhancement
OCR_MULTI_PASS=true
OCR_MAX_ATTEMPTS=3

# Response settings
INCLUDE_TRAJECTORY=true
TRAJECTORY_SAMPLING=10

# Upload limits
MAX_UPLOAD_MB=200

# ===== LOGGING =====
LOG_LEVEL=INFO

# ===== TIMEOUTS =====
KTOR_AI_TIMEOUT_MS=600000